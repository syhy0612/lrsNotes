import{_ as X,I as T,r as x,C as q,J as Y,o as i,z as Q,w as d,b as l,y as ee,K as V,c as p,F as U,L as O,A as I,t as Z,f as R,M as ce,N as W,v as oe,e as s,B as j,O as ie,P as ue,Q as M,R as v,j as de,k as pe,h as se,S as ge,T as ve,U as me,V as fe,W as te,X as _e,H as he,Y as ye,D as xe}from"./index-X-sf46wX.js";/* empty css                   *//* empty css                 *//* empty css                  */const Se=""+new URL("hand-up-DIAiWQej.svg",import.meta.url).href,$e=""+new URL("hand-down-ERN56488.svg",import.meta.url).href,le="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20viewBox='0%200%201600%201600'%3e%3cdefs%3e%3cstyle%3e%20.cls-1,%20.cls-2,%20.cls-3%20{%20stroke:%20%23000;%20}%20.cls-1,%20.cls-4%20{%20fill:%20none;%20}%20.cls-5%20{%20fill:%20%23eecabc;%20}%20.cls-2,%20.cls-6%20{%20fill:%20red;%20}%20.cls-2,%20.cls-3%20{%20stroke-width:%2016px;%20}%20.cls-2,%20.cls-3,%20.cls-4%20{%20stroke-miterlimit:%2010;%20}%20.cls-7%20{%20fill:%20%23fff;%20}%20.cls-3%20{%20opacity:%20.5;%20}%20.cls-8%20{%20display:%20none;%20}%20.cls-9%20{%20fill:%20%23bf0000;%20}%20.cls-4%20{%20stroke:%20red;%20stroke-width:%2099px;%20}%20%3c/style%3e%3c/defs%3e%3cg%3e%3cg%20id='bottom'%3e%3cpolygon%20class='cls-6'%20points='100%201272.9%20100%201572.9%201500%201572.9%201500%201272.9%201450%201272.9%201450%201522.9%20150%201522.9%20150%201272.9%20100%201272.9'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e",ke={class:"role-options"},Ve={__name:"RoleSelector",props:{currentRole:{type:String,default:""},placement:{type:String,default:"right"}},emits:["update:role"],setup(w,{emit:B}){const S=w,$=T(()=>S.placement),a=B,r=x(!1),b=q(),{selectedMode:C}=Y(b),k=T(()=>{var g;return[...((g=C.value)==null?void 0:g.roles)||[],{text:"神",color:"gold"},{text:"好人",color:"gold"},{text:"金水",color:"gold"},{text:"银水",color:"gold"},{text:"警1",color:"green"},{text:"警2",color:"green"},{text:"警3",color:"green"},{text:"X",color:"green"},{text:"你",color:"purple"}]}),m=T(()=>{var g;const h=k.value.find(f=>f.text===S.currentRole)||{color:"gray"};return["hexagon",S.currentRole?`hexagon-${h.color}`:"hexagon-gray",((g=S.currentRole)==null?void 0:g.length)===1?"hexagon-one":"hexagon-two",{active:r.value}]}),n=h=>{S.currentRole===h?(a("update:role",""),r.value=!1):(a("update:role",h),r.value=!1)};return(h,g)=>(i(),Q(I(ce),{visible:r.value,"onUpdate:visible":g[0]||(g[0]=f=>r.value=f),placement:$.value,width:160,trigger:"click"},{reference:d(()=>[l("div",{class:ee(m.value)},V(w.currentRole||"未选"),3)]),default:d(()=>[l("div",ke,[(i(!0),p(U,null,O(k.value,f=>(i(),Q(I(Z),{key:f.text,size:"small",class:ee([`hexagon-${f.color}`,"role-button"]),onClick:E=>n(f.text)},{default:d(()=>[R(V(f.text),1)]),_:2},1032,["class","onClick"]))),128))])]),_:1},8,["visible","placement"]))}},ae=X(Ve,[["__scopeId","data-v-762d801c"]]),ne=w=>(me("data-v-fb335e91"),w=w(),fe(),w),we={class:"game-settings"},be={key:0,class:"mode-config"},Ce=ne(()=>l("h4",null,"角色",-1)),Re={class:"role-options"},Ie={class:"role-group wolves"},Ue={key:0,class:"role-count hexagon"},Be={class:"hexagon hexagon-red"},Ee={class:"role-group villagers"},Oe={key:0,class:"role-count hexagon"},Te={class:"hexagon hexagon-blue"},Ne=ne(()=>l("h4",null,"快捷短语",-1)),Me={class:"config-view-container"},Je={key:0,class:"config-view"},Ae={class:"actions"},ze={__name:"GameSettings",emits:["update-config"],setup(w,{expose:B,emit:S}){const $=S,a=q(),{gameModes:r}=Y(a),b=x("config"),C=x(null),k=x(JSON.parse(JSON.stringify(r.value))),m=x(!1),n=T(()=>r.value.find(o=>o.id===C.value)),h=T(()=>!n.value||!n.value.roles?[]:n.value.roles.filter(o=>o.color==="red")),g=T(()=>!n.value||!n.value.roles?[]:n.value.roles.filter(o=>o.color==="blue")),f=o=>{a.selectMode(o)},E=()=>{m.value=!0},D=()=>{n.value&&(n.value.phrases.push({label:"",value:""}),E())},G=o=>{n.value&&(n.value.phrases.splice(o,1),E())},L=()=>{M.confirm("确定要保存当前配置吗？这将覆盖之前的配置。","保存确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{A()}).catch(()=>{v({type:"info",message:"已取消保存",duration:500})})},A=()=>{$("update-config",r.value),k.value=JSON.parse(JSON.stringify(r.value)),m.value=!1,v({type:"success",message:"配置已保存",duration:500})},F=()=>{M.confirm("确定要重置所有配置吗？这将丢失所有未保存的更改。","重置确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{H()}).catch(()=>{v({type:"info",message:"已取消重置",duration:500})})},H=()=>{a.resetToOriginal(),r.value=JSON.parse(JSON.stringify(a.gameModes)),k.value=JSON.parse(JSON.stringify(r.value)),m.value=!1,v({type:"warning",message:"配置已重置",duration:500})},t=()=>{if(n.value){const o=JSON.stringify(n.value,null,2);navigator.clipboard.writeText(o).then(()=>{v({message:"配置已复制到剪贴板",type:"success",duration:500})}).catch(y=>{console.error("无法复制文本: ",y),v({message:"复制失败，请手动复制",type:"error",duration:500})})}};return W(r,()=>{m.value=JSON.stringify(r.value)!==JSON.stringify(k.value)},{deep:!0}),oe(()=>{C.value=a.selectedModeId}),B({handleClose:o=>{m.value?M.confirm("有未保存的更改，是否保存？","确认",{confirmButtonText:"保存",cancelButtonText:"不保存",type:"warning",distinguishCancelAndClose:!0}).then(()=>{A(),o(!0)}).catch(y=>{y==="cancel"?(m.value=!1,o(!0)):o(!1)}):o(!0)}}),(o,y)=>{const K=de,z=pe,J=se,e=Z,_=ge,re=ve;return i(),p("div",we,[s(z,{modelValue:C.value,"onUpdate:modelValue":y[0]||(y[0]=u=>C.value=u),placeholder:"选择游戏版型",onChange:f},{default:d(()=>[(i(!0),p(U,null,O(I(r),u=>(i(),Q(K,{key:u.id,label:u.name,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(re,{modelValue:b.value,"onUpdate:modelValue":y[1]||(y[1]=u=>b.value=u)},{default:d(()=>[s(_,{label:"版型配置",name:"config"},{default:d(()=>[n.value?(i(),p("div",be,[l("h3",null,V(n.value.name)+" 配置",1),Ce,l("div",Re,[l("div",Ie,[(i(!0),p(U,null,O(h.value,u=>(i(),p("div",{key:u.text,class:"role-container"},[u.count>1?(i(),p("div",Ue,V(u.count),1)):j("",!0),l("div",Be,V(u.text),1)]))),128))]),l("div",Ee,[(i(!0),p(U,null,O(g.value,u=>(i(),p("div",{key:u.text,class:"role-container"},[u.count>1?(i(),p("div",Oe,V(u.count),1)):j("",!0),l("div",Te,V(u.text),1)]))),128))])]),Ne,(i(!0),p(U,null,O(n.value.phrases,(u,N)=>(i(),p("div",{key:N,class:"phrase-input"},[s(J,{modelValue:n.value.phrases[N].label,"onUpdate:modelValue":P=>n.value.phrases[N].label=P,placeholder:"标签",onInput:E},{prepend:d(()=>[R("提示")]),_:2},1032,["modelValue","onUpdate:modelValue"]),s(J,{modelValue:n.value.phrases[N].value,"onUpdate:modelValue":P=>n.value.phrases[N].value=P,placeholder:"值",onInput:E},{prepend:d(()=>[R("起跳")]),_:2},1032,["modelValue","onUpdate:modelValue"]),s(e,{onClick:P=>G(N),type:"danger",icon:I(ie),circle:""},null,8,["onClick","icon"])]))),128)),s(e,{onClick:D,type:"primary"},{default:d(()=>[R("添加短语")]),_:1})])):j("",!0)]),_:1}),s(_,{label:"查看配置",name:"view"},{default:d(()=>[l("div",Me,[s(e,{class:"copy-button",icon:I(ue),circle:"",onClick:t},null,8,["icon"]),n.value?(i(),p("pre",Je,V(JSON.stringify(n.value,null,2)),1)):j("",!0)])]),_:1})]),_:1},8,["modelValue"]),l("div",Ae,[s(e,{onClick:L,type:"primary",disabled:!m.value},{default:d(()=>[R("保存配置")]),_:1},8,["disabled"]),s(e,{onClick:F,type:"warning"},{default:d(()=>[R("重置配置")]),_:1})])])}}},Pe=X(ze,[["__scopeId","data-v-fb335e91"]]),je={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24"},De=l("path",{d:"M12.5 2a.5.5 0 0 0-.5.5V12h-2V4.5a.5.5 0 0 0-1 0V14H7c-.38-1.62-1.358-2.56-2.405-2.678A89 89 0 0 0 6.166 15.1c.86 1.962 1.725 3.422 2.838 4.399C10.078 20.442 11.459 21 13.5 21a5.5 5.5 0 0 0 5.5-5.5V7a.5.5 0 0 0-1 0v5h-2V4a.5.5 0 0 0-1 0v8h-2V2.5a.5.5 0 0 0-.5-.5M21 15.5a7.5 7.5 0 0 1-7.5 7.5c-2.458 0-4.328-.692-5.816-1.998-1.45-1.274-2.459-3.064-3.35-5.1-.93-2.127-1.444-3.422-1.724-4.178-.357-.964.136-2.312 1.476-2.406a4.02 4.02 0 0 1 2.914.94V4.5a2.5 2.5 0 0 1 3.04-2.442 2.5 2.5 0 0 1 4.79-.467A2.502 2.502 0 0 1 18 4v.55q.243-.05.5-.05A2.5 2.5 0 0 1 21 7z"},null,-1),Ge=[De];function Le(w,B){return i(),p("svg",je,[...Ge])}const Fe={render:Le},He={class:"outBox"},Ke={class:"note note-top"},Qe={class:"note"},We={class:"players-container"},Xe={class:"players-column"},qe={class:"messageInfo"},Ye={class:"messageInfo-left"},Ze=["src","alt","title","onClick"],et={class:"player-number"},tt={class:"messageInfo-right"},lt={class:"players-column"},at={class:"messageInfo"},ot={class:"messageInfo-left"},st=["src","alt","title","onClick"],nt={class:"player-number"},rt={class:"messageInfo-right"},ct={class:"dialog-footer"},it={__name:"board",setup(w){const B=q(),{selectedMode:S}=Y(B),$=x(""),a=x(Object.fromEntries(Array.from({length:12},(t,c)=>[`player${String(c+1).padStart(2,"0")}`,{election:3,flag:!0,message:"",sign:"",status:1}]))),r=x(!1),b=x(""),C=T(()=>S.value?S.value.phrases:[]),k=x(!1),m=x(null);oe(()=>{const t=localStorage.getItem("remarks");t&&($.value=t);const c=localStorage.getItem("chatRecords");c&&Object.assign(a.value,JSON.parse(c))}),W($,t=>{localStorage.setItem("remarks",t)},{deep:!0}),W(a,t=>{localStorage.setItem("chatRecords",JSON.stringify(t))},{deep:!0});const n=(t,c)=>{a.value[t].sign=c};function h(t){switch(t){case 1:return Se;case 2:return $e;case 3:return le;default:return le}}function g(t){switch(t){case 1:return"警上刚手";case 2:return"警上放手";case 3:return"警下";default:return"警下"}}function f(t){t.election=t.election%3+1}const E=()=>{M.confirm("确定要重置自记信息吗？","重置自记信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{$.value="",v({type:"success",message:"自记信息已重置",duration:500})}).catch(()=>{v({type:"info",message:"已取消重置",duration:500})})},D=()=>{M.confirm("确定要重置所有玩家的发言内容吗？","重置发言信息",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{Object.keys(a.value).forEach(t=>{a.value[t].message="",a.value[t].sign="",a.value[t].election=3}),v({type:"success",message:"所有发言信息已重置",duration:500})}).catch(()=>{v({type:"info",message:"已取消重置",duration:500})})},G=()=>{M.confirm("确定要使所有玩家更新为上警举手状态吗？","一键上警",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{Object.keys(a.value).forEach(t=>{a.value[t].election=1}),v({type:"success",message:"所有玩家已更新为上警状态",duration:500})}).catch(()=>{v({type:"info",message:"已取消更新",duration:500})})},L=()=>{let t=`自记信息：
${$.value}

发言信息：
`;Object.entries(a.value).forEach(([c,o])=>{t+=`玩家 ${c.slice(-2)}：
`,t+=`  角色：${o.sign||"未设置"}
`,t+=`  状态：${g(o.election)}
`,t+=`  发言：${o.message||"无"}

`}),b.value=t,r.value=!0},A=()=>{navigator.clipboard.writeText(b.value).then(()=>{v({message:"信息已复制到剪贴板",type:"success",duration:2e3}),r.value=!1}).catch(()=>{v({message:"复制失败，请手动复制",type:"error",duration:2e3})})},F=t=>{m.value?m.value.handleClose(c=>{c&&(k.value=!1,t())}):t()},H=t=>{B.updateGameModes(t)};return(t,c)=>{const o=Z,y=se,K=he,z=ye,J=xe;return i(),p(U,null,[l("div",He,[l("div",Ke,[l("h2",null,[R("自记信息 "),s(o,{plain:"",type:"primary",onClick:E,size:"small",icon:I(te),class:"reset-button"},null,8,["icon"]),s(o,{plain:"",type:"primary",onClick:L,size:"small",icon:I(_e),class:"reset-button"},null,8,["icon"])]),s(y,{modelValue:$.value,"onUpdate:modelValue":c[0]||(c[0]=e=>$.value=e),type:"textarea",class:"note-textarea",rows:4,placeholder:"请输入自记信息"},null,8,["modelValue"])]),l("div",Qe,[l("h2",null,[R("发言信息 "),s(o,{plain:"",type:"primary",onClick:D,size:"small",icon:I(te),class:"reset-button"},null,8,["icon"]),s(o,{plain:"",type:"primary",onClick:G,size:"small",class:"reset-button"},{default:d(()=>[s(K,null,{default:d(()=>[s(I(Fe))]),_:1})]),_:1})]),l("div",We,[l("div",Xe,[(i(),p(U,null,O(6,e=>l("div",{key:`player${e}`,class:"player-item"},[l("div",qe,[l("div",Ye,[l("img",{src:h(a.value[`player${String(e).padStart(2,"0")}`].election),alt:g(a.value[`player${String(e).padStart(2,"0")}`].election),title:g(a.value[`player${String(e).padStart(2,"0")}`].election),onClick:_=>f(a.value[`player${String(e).padStart(2,"0")}`])},null,8,Ze),l("div",et,V(String(e).padStart(2,"0")),1),s(ae,{currentRole:a.value[`player${String(e).padStart(2,"0")}`].sign,"onUpdate:role":_=>n(`player${String(e).padStart(2,"0")}`,_),placement:"right"},null,8,["currentRole","onUpdate:role"])]),l("div",tt,[s(z,{modelValue:a.value[`player${String(e).padStart(2,"0")}`].message,"onUpdate:modelValue":_=>a.value[`player${String(e).padStart(2,"0")}`].message=_,type:"textarea",class:"note-textarea",rows:3,placeholder:`请输入${e}号玩家发言信息`,prefix:["A","C"],options:C.value},null,8,["modelValue","onUpdate:modelValue","placeholder","options"])])])])),64))]),l("div",lt,[(i(),p(U,null,O(6,e=>l("div",{key:`player${e+6}`,class:"player-item"},[l("div",at,[l("div",ot,[l("img",{src:h(a.value[`player${String(e+6).padStart(2,"0")}`].election),alt:g(a.value[`player${String(e+6).padStart(2,"0")}`].election),title:g(a.value[`player${String(e+6).padStart(2,"0")}`].election),onClick:_=>f(a.value[`player${String(e+6).padStart(2,"0")}`])},null,8,st),l("div",nt,V(String(e+6).padStart(2,"0")),1),s(ae,{currentRole:a.value[`player${String(e+6).padStart(2,"0")}`].sign,"onUpdate:role":_=>n(`player${String(e+6).padStart(2,"0")}`,_),placement:"left"},null,8,["currentRole","onUpdate:role"])]),l("div",rt,[s(z,{modelValue:a.value[`player${String(e+6).padStart(2,"0")}`].message,"onUpdate:modelValue":_=>a.value[`player${String(e+6).padStart(2,"0")}`].message=_,type:"textarea",class:"note-textarea",rows:3,placeholder:`请输入${e+6}号玩家发言信息`,prefix:["A","C"],options:C.value},null,8,["modelValue","onUpdate:modelValue","placeholder","options"])])])])),64))])])]),s(J,{modelValue:k.value,"onUpdate:modelValue":c[1]||(c[1]=e=>k.value=e),title:"版型设置","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":F,class:"settings-dialog"},{default:d(()=>[s(Pe,{ref_key:"gameSettingsRef",ref:m,onUpdateConfig:H},null,512)]),_:1},8,["modelValue"])]),s(J,{modelValue:r.value,"onUpdate:modelValue":c[3]||(c[3]=e=>r.value=e),title:"导出信息","close-on-click-modal":!1,class:"export-dialog"},{footer:d(()=>[l("span",ct,[s(o,{type:"primary",onClick:A},{default:d(()=>[R(" 复制到剪贴板 ")]),_:1})])]),default:d(()=>[s(y,{modelValue:b.value,"onUpdate:modelValue":c[2]||(c[2]=e=>b.value=e),type:"textarea",rows:10,class:"export-textarea"},null,8,["modelValue"])]),_:1},8,["modelValue"])],64)}}},vt=X(it,[["__scopeId","data-v-2c5351f7"]]);export{vt as B,Pe as G};
