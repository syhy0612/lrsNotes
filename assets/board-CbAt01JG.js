import{_ as F,I as O,r as $,C as K,J as Q,o as n,z as L,w as p,b as e,y as q,K as S,c as u,F as T,L as B,A as f,t as W,f as I,M as ce,N as j,v as le,e as s,B as z,O as ie,P as ue,Q as D,R as w,j as de,k as pe,h as ae,S as ge,T as ve,U as me,V as _e,W as H,X as fe,D as he}from"./index-C90h6RmW.js";/* empty css                   *//* empty css                 *//* empty css                  */const Z="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xml:space='preserve'%20width='50px'%20height='50px'%20version='1.1'%20style='shape-rendering:geometricPrecision;%20text-rendering:geometricPrecision;%20image-rendering:optimizeQuality;%20fill-rule:evenodd;%20clip-rule:evenodd'%20viewBox='0%200%201424%201924'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cstyle%3e%20.fil0%20{fill:%23000;}%20.fil1%20{fill:%23EECABC;}%20%3c/style%3e%3cg%20id='图层_x0020_1'%3e%3cmetadata%20id='CorelCorpID_0Corel-Layer'/%3e%3cpath%20class='fil0'%20d='M91%20999c-22,-107%20105,-167%20176,-95%2018,20%20168,273%20192,315%2038,66%2091,26%2090,-11%20-2,-32%20-117,-186%20-120,-221%20-4,-61%20-3,-649%205,-671%2020,-53%2083,-55%20115,-38%2047,25%2038,70%2038,132%200,113%201,226%201,339%200,35%20-7,139%209,160%2011,14%2080,51%2079,-57%200,-113%200,-227%200,-340%200,-113%20-3,-227%20-2,-340%201,-55%2030,-85%2087,-82%2057,3%2073,42%2073,99%20-1,225%200,450%200,675%200,24%20-5,55%209,74%2013,17%2040,25%2062,8%2028,-22%2017,-115%2017,-156%200,-45%20-5,-479%203,-502%2013,-38%2063,-63%20111,-43%2049,20%2044,66%2044,124l0%20507c0,51%20-13,126%2034,135%2068,13%2055,-77%2055,-114%201,-112%203,-224%204,-336%200,-39%203,-92%2060,-105%2053,-13%2094,24%2099,70l3%20678c2,164%205,274%20-89,415%20-73,110%20-167,175%20-310,202%20-305,58%20-518,-63%20-660,-329%20-38,-71%20-70,-160%20-94,-245%20-13,-46%20-23,-85%20-41,-128%20-11,-29%20-46,-95%20-50,-120zm494%20-802c-67,-35%20-174,-15%20-218,56%20-35,56%20-27,96%20-27,181%200,138%200,276%200,414%20-11,-7%20-18,-16%20-29,-24%20-78,-58%20-179,-54%20-251,10%20-46,41%20-60,97%20-60,157%200,45%2060,153%2084,235%2064,227%20157,462%20360,597%20176,117%20406,126%20604,60%2033,-11%2074,-28%20101,-46%20124,-80%20212,-202%20252,-345%2010,-34%2023,-89%2023,-129%200,-95%200,-191%200,-286l-5%20-576c-13,-68%20-78,-136%20-154,-136%20-44,0%20-56,0%20-95,20%200,-41%203,-82%20-6,-116%20-7,-26%20-17,-43%20-33,-61%20-2,-2%20-6,-7%20-8,-9%20-43,-42%20-88,-54%20-149,-47%20-25,3%20-32,10%20-53,12%200,-32%20-3,-45%20-12,-66%20-44,-109%20-202,-134%20-284,-41%20-33,37%20-40,71%20-40,140z'/%3e%3cpath%20class='fil1'%20d='M429%20987c3,35%20118,189%20120,221%201,37%20-52,77%20-90,11%20-24,-42%20-174,-295%20-192,-315%20-71,-72%20-198,-12%20-176,95%204,25%2039,91%2050,120%2018,43%2028,82%2041,128%2024,85%2056,174%2094,245%20142,266%20355,387%20660,329%20143,-27%20237,-92%20310,-202%2094,-141%2091,-251%2089,-415l-3%20-678c-5,-46%20-46,-83%20-99,-70%20-57,13%20-60,66%20-60,105%20-1,112%20-3,224%20-4,336%200,37%2013,127%20-55,114%20-47,-9%20-34,-84%20-34,-135l0%20-507c0,-58%205,-104%20-44,-124%20-48,-20%20-98,5%20-111,43%20-8,23%20-3,457%20-3,502%200,41%2011,134%20-17,156%20-22,17%20-49,9%20-62,-8%20-14,-19%20-9,-50%20-9,-74%200,-225%20-1,-450%200,-675%200,-57%20-16,-96%20-73,-99%20-57,-3%20-86,27%20-87,82%20-1,113%202,227%202,340%200,113%200,227%200,340%201,108%20-68,71%20-79,57%20-16,-21%20-9,-125%20-9,-160%200,-113%20-1,-226%20-1,-339%200,-62%209,-107%20-38,-132%20-32,-17%20-95,-15%20-115,38%20-8,22%20-9,610%20-5,671z'/%3e%3c/g%3e%3c/svg%3e",ee="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xml:space='preserve'%20width='50px'%20height='50px'%20version='1.1'%20style='shape-rendering:geometricPrecision;%20text-rendering:geometricPrecision;%20image-rendering:optimizeQuality;%20fill-rule:evenodd;%20clip-rule:evenodd'%20viewBox='0%200%201424%201924'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cstyle%3e%20.fil0%20{fill:none;%20stroke:%23000;%20stroke-width:4;}%20.fil1%20{fill:none;}%20%3c/style%3e%3cg%20id='图层_x0020_1'%3e%3cmetadata%20id='CorelCorpID_0Corel-Layer'/%3e%3cpath%20class='fil0'%20d='M91%20999c-22,-107%20105,-167%20176,-95%2018,20%20168,273%20192,315%2038,66%2091,26%2090,-11%20-2,-32%20-117,-186%20-120,-221%20-4,-61%20-3,-649%205,-671%2020,-53%2083,-55%20115,-38%2047,25%2038,70%2038,132%200,113%201,226%201,339%200,35%20-7,139%209,160%2011,14%2080,51%2079,-57%200,-113%200,-227%200,-340%200,-113%20-3,-227%20-2,-340%201,-55%2030,-85%2087,-82%2057,3%2073,42%2073,99%20-1,225%200,450%200,675%200,24%20-5,55%209,74%2013,17%2040,25%2062,8%2028,-22%2017,-115%2017,-156%200,-45%20-5,-479%203,-502%2013,-38%2063,-63%20111,-43%2049,20%2044,66%2044,124l0%20507c0,51%20-13,126%2034,135%2068,13%2055,-77%2055,-114%201,-112%203,-224%204,-336%200,-39%203,-92%2060,-105%2053,-13%2094,24%2099,70l3%20678c2,164%205,274%20-89,415%20-73,110%20-167,175%20-310,202%20-305,58%20-518,-63%20-660,-329%20-38,-71%20-70,-160%20-94,-245%20-13,-46%20-23,-85%20-41,-128%20-11,-29%20-46,-95%20-50,-120zm494%20-802c-67,-35%20-174,-15%20-218,56%20-35,56%20-27,96%20-27,181%200,138%200,276%200,414%20-11,-7%20-18,-16%20-29,-24%20-78,-58%20-179,-54%20-251,10%20-46,41%20-60,97%20-60,157%200,45%2060,153%2084,235%2064,227%20157,462%20360,597%20176,117%20406,126%20604,60%2033,-11%2074,-28%20101,-46%20124,-80%20212,-202%20252,-345%2010,-34%2023,-89%2023,-129%200,-95%200,-191%200,-286l-5%20-576c-13,-68%20-78,-136%20-154,-136%20-44,0%20-56,0%20-95,20%200,-41%203,-82%20-6,-116%20-7,-26%20-17,-43%20-33,-61%20-2,-2%20-6,-7%20-8,-9%20-43,-42%20-88,-54%20-149,-47%20-25,3%20-32,10%20-53,12%200,-32%20-3,-45%20-12,-66%20-44,-109%20-202,-134%20-284,-41%20-33,37%20-40,71%20-40,140z'/%3e%3c/g%3e%3c/svg%3e",ye={class:"role-options"},xe={__name:"RoleSelector",props:{currentRole:{type:String,default:""},placement:{type:String,default:"right"}},emits:["update:role"],setup(V,{emit:U}){const h=V,C=O(()=>h.placement),t=U,r=$(!1),b=K(),{selectedMode:y}=Q(b),k=O(()=>{var v;return[...((v=y.value)==null?void 0:v.roles)||[],{text:"神",color:"gold"},{text:"好人",color:"gold"},{text:"金水",color:"gold"},{text:"银水",color:"gold"},{text:"警1",color:"green"},{text:"警2",color:"green"},{text:"警3",color:"green"},{text:"X",color:"green"},{text:"你",color:"purple"}]}),g=O(()=>{var v;const x=k.value.find(m=>m.text===h.currentRole)||{color:"gray"};return["hexagon",h.currentRole?`hexagon-${x.color}`:"hexagon-gray",((v=h.currentRole)==null?void 0:v.length)===1?"hexagon-one":"hexagon-two",{active:r.value}]}),o=x=>{h.currentRole===x?(t("update:role",""),r.value=!1):(t("update:role",x),r.value=!1)};return(x,v)=>(n(),L(f(ce),{visible:r.value,"onUpdate:visible":v[0]||(v[0]=m=>r.value=m),placement:C.value,width:160,trigger:"click"},{reference:p(()=>[e("div",{class:q(g.value)},S(V.currentRole||"未选"),3)]),default:p(()=>[e("div",ye,[(n(!0),u(T,null,B(k.value,m=>(n(),L(f(W),{key:m.text,size:"small",class:q([`hexagon-${m.color}`,"role-button"]),onClick:a=>o(m.text)},{default:p(()=>[I(S(m.text),1)]),_:2},1032,["class","onClick"]))),128))])]),_:1},8,["visible","placement"]))}},te=F(xe,[["__scopeId","data-v-762d801c"]]),oe=V=>(me("data-v-275250c7"),V=V(),_e(),V),Se={class:"game-settings"},we={key:0,class:"mode-config"},Ce=oe(()=>e("h4",null,"角色",-1)),ke={class:"role-options"},$e={class:"role-group wolves"},Ve={key:0,class:"role-count hexagon"},be={class:"hexagon hexagon-red"},Re={class:"role-group villagers"},Ie={key:0,class:"role-count hexagon"},Te={class:"hexagon hexagon-blue"},Be=oe(()=>e("h4",null,"快捷短语",-1)),Oe={class:"config-view-container"},Ue={key:0,class:"config-view"},Ee={class:"actions"},Ne={__name:"GameSettings",emits:["update-config"],setup(V,{expose:U,emit:h}){const C=h,t=K(),{gameModes:r}=Q(t),b=$("config"),y=$(null),k=$(JSON.parse(JSON.stringify(r.value))),g=$(!1),o=O(()=>r.value.find(i=>i.id===y.value)),x=O(()=>!o.value||!o.value.roles?[]:o.value.roles.filter(i=>i.color==="red")),v=O(()=>!o.value||!o.value.roles?[]:o.value.roles.filter(i=>i.color==="blue")),m=i=>{t.selectMode(i)},a=()=>{g.value=!0},d=()=>{o.value&&(o.value.phrases.push({label:"",value:""}),a())},N=i=>{o.value&&(o.value.phrases.splice(i,1),a())},G=()=>{D.confirm("确定要保存当前配置吗？这将覆盖之前的设置。","保存确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{M()}).catch(()=>{w({type:"info",message:"已取消保存",duration:500})})},M=()=>{C("update-config",r.value),k.value=JSON.parse(JSON.stringify(r.value)),g.value=!1,w({type:"success",message:"配置已保存",duration:500})},A=()=>{D.confirm("确定要重置所有配置吗？这将丢失所有未保存的更改。","重置确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l()}).catch(()=>{w({type:"info",message:"已取消重置",duration:500})})},l=()=>{t.resetToOriginal(),r.value=JSON.parse(JSON.stringify(t.gameModes)),k.value=JSON.parse(JSON.stringify(r.value)),g.value=!1,w({type:"warning",message:"配置已重置",duration:500})},_=()=>{if(o.value){const i=JSON.stringify(o.value,null,2);navigator.clipboard.writeText(i).then(()=>{w({message:"配置已复制到剪贴板",type:"success",duration:500})}).catch(R=>{console.error("无法复制文本: ",R),w({message:"复制失败，请手动复制",type:"error",duration:500})})}};return j(r,()=>{g.value=JSON.stringify(r.value)!==JSON.stringify(k.value)},{deep:!0}),le(()=>{y.value=t.selectedModeId}),U({handleClose:i=>{g.value?D.confirm("有未保存的更改，是否保存？","确认",{confirmButtonText:"保存",cancelButtonText:"不保存",type:"warning",distinguishCancelAndClose:!0}).then(()=>{M(),i(!0)}).catch(R=>{R==="cancel"?(g.value=!1,i(!0)):i(!1)}):i(!0)}}),(i,R)=>{const se=de,ne=pe,X=ae,P=W,Y=ge,re=ve;return n(),u("div",Se,[s(ne,{modelValue:y.value,"onUpdate:modelValue":R[0]||(R[0]=c=>y.value=c),placeholder:"选择游戏版型",onChange:m},{default:p(()=>[(n(!0),u(T,null,B(f(r),c=>(n(),L(se,{key:c.id,label:c.name,value:c.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),s(re,{modelValue:b.value,"onUpdate:modelValue":R[1]||(R[1]=c=>b.value=c)},{default:p(()=>[s(Y,{label:"版型配置",name:"config"},{default:p(()=>[o.value?(n(),u("div",we,[e("h3",null,S(o.value.name)+" 配置",1),Ce,e("div",ke,[e("div",$e,[(n(!0),u(T,null,B(x.value,c=>(n(),u("div",{key:c.text,class:"role-container"},[c.count>1?(n(),u("div",Ve,S(c.count),1)):z("",!0),e("div",be,S(c.text),1)]))),128))]),e("div",Re,[(n(!0),u(T,null,B(v.value,c=>(n(),u("div",{key:c.text,class:"role-container"},[c.count>1?(n(),u("div",Ie,S(c.count),1)):z("",!0),e("div",Te,S(c.text),1)]))),128))])]),Be,(n(!0),u(T,null,B(o.value.phrases,(c,E)=>(n(),u("div",{key:E,class:"phrase-input"},[s(X,{modelValue:o.value.phrases[E].label,"onUpdate:modelValue":J=>o.value.phrases[E].label=J,placeholder:"标签",onInput:a},{prepend:p(()=>[I("提示")]),_:2},1032,["modelValue","onUpdate:modelValue"]),s(X,{modelValue:o.value.phrases[E].value,"onUpdate:modelValue":J=>o.value.phrases[E].value=J,placeholder:"值",onInput:a},{prepend:p(()=>[I("起跳")]),_:2},1032,["modelValue","onUpdate:modelValue"]),s(P,{onClick:J=>N(E),type:"danger",icon:f(ie),circle:""},null,8,["onClick","icon"])]))),128)),s(P,{onClick:d,type:"primary"},{default:p(()=>[I("添加短语")]),_:1})])):z("",!0)]),_:1}),s(Y,{label:"查看配置",name:"view"},{default:p(()=>[e("div",Oe,[s(P,{class:"copy-button",icon:f(ue),circle:"",onClick:_},null,8,["icon"]),o.value?(n(),u("pre",Ue,S(JSON.stringify(o.value,null,2)),1)):z("",!0)])]),_:1})]),_:1},8,["modelValue"]),e("div",Ee,[s(P,{onClick:G,type:"primary",disabled:!g.value},{default:p(()=>[I("保存配置")]),_:1},8,["disabled"]),s(P,{onClick:A,type:"warning"},{default:p(()=>[I("重置配置")]),_:1})])])}}},Me=F(Ne,[["__scopeId","data-v-275250c7"]]),Pe={class:"outBox"},De={class:"note note-top"},Je={class:"note"},ze={class:"players-container"},Ge={class:"players-column"},Ae={class:"messageInfo"},Le={class:"messageInfo-left"},je=["src","alt","title","onClick"],Fe={class:"player-number"},Ke={class:"messageInfo-right"},Qe={class:"players-column"},We={class:"messageInfo"},Xe={class:"messageInfo-left"},Ye=["src","alt","title","onClick"],qe={class:"player-number"},He={class:"messageInfo-right"},Ze={__name:"board",setup(V){const U=K(),{selectedMode:h}=Q(U),C=$(""),t=$(Object.fromEntries(Array.from({length:12},(a,d)=>[`player${String(d+1).padStart(2,"0")}`,{election:2,flag:!0,message:"",sign:"",status:1}]))),r=O(()=>h.value?h.value.phrases:[]),b=$(!1),y=$(null);le(()=>{const a=localStorage.getItem("remarks");a&&(C.value=a);const d=localStorage.getItem("chatRecords");d&&Object.assign(t.value,JSON.parse(d))}),j(C,a=>{localStorage.setItem("remarks",a)},{deep:!0}),j(t,a=>{localStorage.setItem("chatRecords",JSON.stringify(a))},{deep:!0});const k=(a,d)=>{t.value[a].sign=d};function g(a){a.election=a.election===1?2:1}const o=()=>{D.confirm("确定要重置自记信息吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{C.value="",w({type:"success",message:"自记信息已重置",duration:500})}).catch(()=>{w({type:"info",message:"已取消重置",duration:500})})},x=()=>{D.confirm("确定要重置所有玩家的发言内容吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(()=>{Object.keys(t.value).forEach(a=>{t.value[a].message="",t.value[a].sign="",t.value[a].election=2}),w({type:"success",message:"所有发言信息已重置",duration:500})}).catch(()=>{w({type:"info",message:"已取消重置",duration:500})})},v=a=>{y.value?y.value.handleClose(d=>{d&&(b.value=!1,a())}):a()},m=a=>{U.updateGameModes(a)};return(a,d)=>{const N=W,G=ae,M=fe,A=he;return n(),u("div",Pe,[e("div",De,[e("h2",null,[I("自记信息 "),s(N,{plain:"",type:"primary",onClick:o,size:"small",icon:f(H),class:"reset-button"},null,8,["icon"])]),s(G,{modelValue:C.value,"onUpdate:modelValue":d[0]||(d[0]=l=>C.value=l),type:"textarea",class:"note-textarea",rows:4,placeholder:"请输入自记信息"},null,8,["modelValue"])]),e("div",Je,[e("h2",null,[I("发言信息 "),s(N,{plain:"",type:"primary",onClick:x,size:"small",icon:f(H),class:"reset-button"},null,8,["icon"])]),e("div",ze,[e("div",Ge,[(n(),u(T,null,B(6,l=>e("div",{key:`player${l}`,class:"player-item"},[e("div",Ae,[e("div",Le,[e("img",{src:t.value[`player${String(l).padStart(2,"0")}`].election===1?f(Z):f(ee),alt:t.value[`player${String(l).padStart(2,"0")}`].election===1?"警上":"警下",title:t.value[`player${String(l).padStart(2,"0")}`].election===1?"警上":"警下",onClick:_=>g(t.value[`player${String(l).padStart(2,"0")}`])},null,8,je),e("div",Fe,S(String(l).padStart(2,"0")),1),s(te,{currentRole:t.value[`player${String(l).padStart(2,"0")}`].sign,"onUpdate:role":_=>k(`player${String(l).padStart(2,"0")}`,_),placement:"right"},null,8,["currentRole","onUpdate:role"])]),e("div",Ke,[s(M,{modelValue:t.value[`player${String(l).padStart(2,"0")}`].message,"onUpdate:modelValue":_=>t.value[`player${String(l).padStart(2,"0")}`].message=_,type:"textarea",class:"note-textarea",rows:3,placeholder:`请输入${l}号玩家发言信息`,prefix:["A","C"],options:r.value},null,8,["modelValue","onUpdate:modelValue","placeholder","options"])])])])),64))]),e("div",Qe,[(n(),u(T,null,B(6,l=>e("div",{key:`player${l+6}`,class:"player-item"},[e("div",We,[e("div",Xe,[e("img",{src:t.value[`player${String(l+6).padStart(2,"0")}`].election===1?f(Z):f(ee),alt:t.value[`player${String(l+6).padStart(2,"0")}`].election===1?"警上":"警下",title:t.value[`player${String(l+6).padStart(2,"0")}`].election===1?"警上":"警下",onClick:_=>g(t.value[`player${String(l+6).padStart(2,"0")}`])},null,8,Ye),e("div",qe,S(String(l+6).padStart(2,"0")),1),s(te,{currentRole:t.value[`player${String(l+6).padStart(2,"0")}`].sign,"onUpdate:role":_=>k(`player${String(l+6).padStart(2,"0")}`,_),placement:"left"},null,8,["currentRole","onUpdate:role"])]),e("div",He,[s(M,{modelValue:t.value[`player${String(l+6).padStart(2,"0")}`].message,"onUpdate:modelValue":_=>t.value[`player${String(l+6).padStart(2,"0")}`].message=_,type:"textarea",class:"note-textarea",rows:3,placeholder:`请输入${l+6}号玩家发言信息`,prefix:["A","C"],options:r.value},null,8,["modelValue","onUpdate:modelValue","placeholder","options"])])])])),64))])])]),s(A,{modelValue:b.value,"onUpdate:modelValue":d[1]||(d[1]=l=>b.value=l),title:"版型设置","close-on-click-modal":!1,"close-on-press-escape":!1,"before-close":v,class:"settings-dialog"},{default:p(()=>[s(Me,{ref_key:"gameSettingsRef",ref:y,onUpdateConfig:m},null,512)]),_:1},8,["modelValue"])])}}},s2=F(Ze,[["__scopeId","data-v-29060d93"]]);export{s2 as B,Me as G};
