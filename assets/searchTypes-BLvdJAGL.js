import{_ as $,C as b,D as N,r as w,G as I,v as U,x as O,H as A,o as t,c as l,e as c,w as d,A as i,a0 as G,a1 as H,F as z,I as V,B as u,h as J,b as v,z as Q,a2 as W,y as j,W as y,a3 as q,a4 as K,J as B,a5 as P,a6 as X,Q as Y,R as Z,U as ee}from"./index-BiM0nisx.js";/* empty css                 */const E=_=>(Y("data-v-a1b54343"),_=_(),Z(),_),se={class:"suffix-container"},ae={key:0,class:"dropdown"},te={key:0,class:"favorites-section"},oe=E(()=>v("div",{class:"section-title"},"收藏版型",-1)),ne=["onClick"],le={key:1,class:"others-section"},ce=E(()=>v("div",{class:"section-title"},"全部版型",-1)),ie=["onClick"],re={key:2,class:"no-results"},de={__name:"searchTypes",setup(_){const a=b(),{gameModes:p,isInitialized:ue}=N(a),o=w(""),n=w(!1),h=w(null),g=I(()=>{if(!p.value)return[];const e=o.value.toLowerCase();return p.value.filter(r=>r.name.toLowerCase().includes(e)||r.pinyin.includes(e))}),m=I(()=>g.value.filter(e=>e.isFavorite)),k=I(()=>g.value.filter(e=>!e.isFavorite)),L=()=>{o.value&&(n.value=!0)},D=()=>{n.value=!0},x=()=>{o.value="",n.value=!1},R=()=>{n.value=!n.value},F=e=>{a.selectMode(e.id),o.value=e.name,n.value=!1},M=e=>{a.toggleFavorite(e.id)},S=e=>{h.value&&!h.value.contains(e.target)&&(n.value=!1)};return U(async()=>{document.addEventListener("click",S),a.isInitialized||await a.initializeStore(),a.selectedMode&&(o.value=a.selectedMode.name)}),O(()=>{document.removeEventListener("click",S)}),A(p,e=>{e&&e.length>0&&a.selectedMode&&(o.value=a.selectedMode.name)}),(e,r)=>{const f=ee,T=J;return t(),l("div",{class:"search-container",ref_key:"containerRef",ref:h},[c(T,{modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=s=>o.value=s),placeholder:"搜索版型...",onInput:L,onFocus:D,class:"custom-input","prefix-icon":i(K),onClear:x},{suffix:d(()=>[v("div",se,[o.value?(t(),Q(f,{key:0,class:"clear-icon el-input__clear",onClick:x},{default:d(()=>[c(i(W))]),_:1})):u("",!0),c(f,{class:j(["dropdown-icon",{"is-reverse":n.value}]),onMousedown:y(R,["prevent"])},{default:d(()=>[c(i(q))]),_:1},8,["class"])])]),_:1},8,["modelValue","prefix-icon"]),i(a).isInitialized?G((t(),l("div",ae,[m.value.length>0?(t(),l("div",te,[oe,(t(!0),l(z,null,V(m.value,s=>(t(),l("div",{key:s.id,class:"dropdown-item favorite",onClick:C=>F(s)},[v("span",null,B(s.name),1),c(f,{class:"favorite-icon",onClick:y(C=>M(s),["stop"])},{default:d(()=>[c(i(P))]),_:2},1032,["onClick"])],8,ne))),128))])):u("",!0),k.value.length>0?(t(),l("div",le,[ce,(t(!0),l(z,null,V(k.value,s=>(t(),l("div",{key:s.id,class:"dropdown-item",onClick:C=>F(s)},[v("span",null,B(s.name),1),c(f,{class:"favorite-icon",onClick:y(C=>M(s),["stop"])},{default:d(()=>[c(i(X))]),_:2},1032,["onClick"])],8,ie))),128))])):u("",!0),m.value.length===0&&k.value.length===0?(t(),l("div",re," 没有匹配版型 ")):u("",!0)],512)),[[H,n.value]]):u("",!0)],512)}}},fe=$(de,[["__scopeId","data-v-a1b54343"]]);export{fe as default};
